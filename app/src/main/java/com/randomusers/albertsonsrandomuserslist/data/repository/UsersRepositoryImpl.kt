package com.randomusers.albertsonsrandomuserslist.data.repositoryimport android.util.Logimport kotlinx.coroutines.Dispatchersimport kotlinx.coroutines.flow.Flowimport kotlinx.coroutines.flow.catchimport kotlinx.coroutines.flow.collectimport kotlinx.coroutines.flow.flowimport kotlinx.coroutines.flow.flowOnimport kotlinx.coroutines.flow.onEachimport com.randomusers.albertsonsrandomuserslist.data.mapper.toEntityimport com.randomusers.albertsonsrandomuserslist.data.mapper.toModelimport com.randomusers.albertsonsrandomuserslist.data.model.UsersModelimport com.randomusers.albertsonsrandomuserslist.data.source.local.room.dao.UsersDaoimport com.randomusers.albertsonsrandomuserslist.data.source.remote.api.UsersApiimport com.randomusers.albertsonsrandomuserslist.domain.repository.UsersRepositoryimport javax.inject.Injectclass UsersRepositoryImpl @Inject constructor(    private val api: UsersApi,    private val dao: UsersDao,) : UsersRepository {    override fun getAllUser(): Flow<List<UsersModel>> = flow {        Log.d("TTT", "getAllUser: 1")        val response = api.getAllUsers()        if (response.isSuccessful && response.body() != null) {            response.body()?.let {                dao.insertUsers(response.body()!!.results.map { it.toEntity() })                emit(response.body()!!.results.map {                    it.toModel()                })            }        }    }        .catch {            dao.getAllUsers()                .onEach { emit(it.map { it.toModel() }) }.collect()        }        .flowOn(Dispatchers.IO)}